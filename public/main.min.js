"use strict";function bindEventListeners(){var searchInput=document.querySelector(".search-box input");var menuItemsContainer=document.querySelector(".menu-items-container");var menuBtn=document.querySelector(".menu-button");var headerMargin=document.querySelector(".header-margin");searchInput.addEventListener("focus",function(){menuItemsContainer.classList.add("input-focused")});searchInput.addEventListener("blur",function(){menuItemsContainer.classList.remove("input-focused")});menuBtn.addEventListener("click",function(){menuItemsContainer.classList.toggle("open");headerMargin.classList.toggle("open")});if(innerWidth<768){window.addEventListener("scroll",function(){var nav=document.querySelector("nav");var navBottom=document.querySelector("main").getBoundingClientRect().top;if(navBottom<0){if(!nav.classList.contains("fixedToTop")){nav.classList.add("fixedToTop")}}else nav.classList.remove("fixedToTop")})}}function fetchUserDetails(){var query="{\n        viewer {\n          login\n          name\n          avatarUrl(size: 200)\n          bio\n          websiteUrl\n          url\n          repositories(last: 20) {\n            nodes {\n              name\n              description\n              updatedAt\n              licenseInfo {\n                name\n              }\n              languages(last: 20) {\n                nodes {\n                  color\n                  name\n                }\n              }\n            }\n          }\n        }\n    }";var githubAPI="https://api.github.com/graphql";var reqOptions={method:"POST",body:JSON.stringify({query:query,variables:{}}),headers:{Authorization:"Bearer "+GITHUB_ACCESS_TOKEN,"Content-Type":"application/json"}};var intro=document.querySelector("#intro");fetch(githubAPI,reqOptions).then(function(res){return res.json()}).then(function(res){var data=res.data.viewer;for(var each in data){updateDOM(each,data[each])}intro.classList.add("disappear");setTimeout(function(){intro.style.display="none"},1e3)}).catch(function(e){var introP=intro.querySelector("p");var introSvg=intro.querySelectorAll("svg");if(e.message==="Failed to fetch"){introP.innerText="Failed to get user details, please check your internet connection and reload the page."}else{introP.innerText="An error occured, please reload page."}introSvg.forEach(function(svg){return svg.style.animation="none"});console.log(e.message)})}function updateDOM(className,value){switch(className){case"repositories":var repoContainer=document.querySelector("#repo-container");document.querySelector(".badge").innerText=value.nodes.length;value.nodes.reverse().forEach(function(repo){var frag=document.getElementById("repo-placeholder").cloneNode(true);frag.classList.remove("d-none");frag.id="";for(var field in repo){switch(field){case"languages":if(repo.languages.nodes[0]){frag.querySelector("#repo-languages-name").innerText=repo.languages.nodes[0].name;frag.querySelector("#repo-languages-color").style.background=repo.languages.nodes[0].color}else{frag.querySelector("#repo-languages-name").style.cssText="width: 0; margin: 0; padding: 0;";frag.querySelector("#repo-languages-color").style.cssText="width: 0; margin: 0; padding: 0;"}break;case"licenseInfo":if(repo.licenseInfo){frag.querySelector("#repo-licenseInfo-name").innerText=repo.licenseInfo.name}else{frag.querySelector(".license-paragraph").innerHTML="";frag.querySelector(".license-paragraph").style.cssText="margin: 0; padding: 0;"}break;case"updatedAt":var dateDiff=Math.floor((Date.now()-new Date(repo[field]))/(24*60*60*1e3));if(dateDiff>7)repo[field]="on "+new Date(repo[field]).toDateString().slice(4);else repo[field]=dateDiff+" days ago";default:frag.querySelector("#repo-"+field).innerText=repo[field]?repo[field]:""}}repoContainer.appendChild(frag)});break;case"avatarUrl":var userAvatars=document.getElementsByClassName(className);for(var i=0;i<userAvatars.length;i++){if(userAvatars[i].nodeName==="IMG")userAvatars[i].src=value;else{userAvatars[i].style.background="url("+value+")";userAvatars[i].style.backgroundSize="cover"}}break;default:var elems=document.getElementsByClassName(className);for(var _i=0;_i<elems.length;_i++){elems[_i].innerText=value;if(className==="websiteUrl")elems[_i].href=value}}}function init(){bindEventListeners();fetchUserDetails()}window.addEventListener("load",init);